<div class="page-content inset">
  <div class="row">
    <div class="col-md-12">
      <h2><%= t('.new_service_survey') %></h2>
      <%= form_for(:service_survey, url: admins_service_surveys_path, html: { method: :post, class: 'form-horizontal' }) do |f| %>
        <% if @service_survey.errors.any? %>
          <div id="error_explanation">
            <h2><%= t 'form.errors.prohibited', number_of_errors: pluralize(@service_surveys.errors.count, "error") %></h2>
          </div>
        <% end %>

        <fieldset>
          <div class="form-group">
            <%= f.label :title, t('form.labels.title'), class: 'col-md-3 control-label' %>
            <div class="col-md-5">
              <%= f.text_field :title, class: 'form-control' %>
            </div>
          </div>
        </fieldset>
        <fieldset>
          <div class="form-group">
            <%= f.label :services, t('form.labels.services'), class: 'col-md-3 control-label' %>
            <div class="col-md-5">
              <% @available_services.each do |service| %>
                <div class="checkbox">
                  <%= f.check_box :service_ids,  { multiple: true }, service.id, nil %>
                  <%= f.label :service_ids, service.name, value: service.id %>
                </div>
              <% end %>
            </div>
          </div>
        </fieldset>
        <fieldset>
          <div class="form-group">
            <%= f.label :phase, t('form.labels.phase'), class: 'col-md-3 control-label' %>
            <div class="col-md-5">
              <ul class="list-unstyled">
                <% phase_options.each do |phase| %>
                  <div class="col-md-4">
                    <label>
                      <%= f.radio_button :phase, phase %>
                      <%= f.label t(".phase_options.#{phase}") %>
                    </label>
                  </div>
                <% end %>
              </ul>
            </div>
          </div>
        </fieldset>

        <div class="well">
          <%= f.fields_for :questions do |q| %>
            <div class="row">
              <%= q.label :criterion, t('form.labels.criterion'), class: 'col-md-2 text-right' %>
              <div class="col-md-2">
                <%= q.select :criterion, criterion_options %>
              </div>
            </div>
            <div class="row">
              <%= q.label :text, t('form.labels.text'), class: 'col-md-2 text-right' %>
              <div class="col-md-5">
                <%= q.text_field :text, class: "form-control" %>
              </div>
            </div>
            <div class="row">
              <%= q.label :answer_type, t('form.labels.answer_type'), class: 'col-md-2 text-right' %>
              <div class="col-md-2">
                <%= q.select :answer_type, answer_type_options, { prompt: I18n.t("form.options.answer_type_select") }, { class: "js-answer-selection" } %>
              </div>
            </div>
            <div id="binary" class="row hidden js-answer-wrapper">
              <div class="well col-md-6 col-md-offset-2">
                <p class="text-muted">
                  <%= radio_button_tag :answer, :yes, false, disabled: true %>
                  <em><%= t('answer_type.binary.positive') %></em>
                </p>
                <p class="text-muted">
                  <%= radio_button_tag :answer, :no, false, disabled: true %>
                  <em><%= t('answer_type.binary.negative') %></em>
                </p>
              </div>
            </div>
          <% end %>
        </div>

        <div class="actions col-md-2">
          <%= f.submit "Guardar", class: 'btn btn-primary' %>
        </div>
      <% end %>
    </div>
  </div>
</div>
